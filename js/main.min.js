var is_chrome=navigator.userAgent.indexOf('Chrome')>-1;var is_explorer=navigator.userAgent.indexOf('MSIE')>-1;var is_firefox=navigator.userAgent.indexOf('Firefox')>-1;var is_safari=navigator.userAgent.indexOf("Safari")>-1;var is_opera=navigator.userAgent.toLowerCase().indexOf("op")>-1;if((is_chrome)&&(is_safari)){is_safari=!1}
if((is_chrome)&&(is_opera)){is_chrome=!1}
if(is_safari)$('html').addClass('is_safari')
if(/iPad/i.test(navigator.userAgent)){$('.sixtyten').text('DRAG')}
$('.проект .окно').each(function(){$(this).data('base-окно-left',parseInt($(this).css('left')))
$(this).data('base-окно-width',parseInt(window.getComputedStyle($(this).get(0))['width']));$(this).data('base-окно-height',parseInt(window.getComputedStyle($(this).get(0))['height']));$(this).data('base-образ-bgx',parseInt($(this).find('.образ').css('background-position-x')))});var mousenter_position;var $ok1=$(''),$ok2=$(''),$ok3=$(''),$ok1vn=$(''),$ok2vn=$(''),$ok3vn=$(''),$ok2basewidth_int=0,$ok2baseheight_int=0;$('.проект').on('mouseenter',function(e){mouseenter_position={x:e.clientX,y:e.clientY};$(this).addClass('hover')
$('#круг').trigger('mouseover');$ok1=$(this).find('.окно-1')
$ok1vn=$ok1.find('.внутри')
$ok2=$(this).find('.окно-2')
$ok2basewidth_int=parseInt($ok2.data('base-окно-width'))
$ok2baseheight_int=parseInt($ok2.data('base-окно-height'))
$ok2vn=$ok2.find('.внутри')
$ok3=$(this).find('.окно-3')
$ok3basewidth_int=parseInt($ok3.data('base-окно-width'))})
$('.проект').on('mouseleave',function(e){$('#круг').trigger('mouseout');$(this).find('.окно-1, .окно-2, .окно-3, .внутри').css({width:'',left:'',clip:''})
$(this).removeClass('hover')})
$('.проект').removeClass('текущий');var onProjectMouseMove=function(e){if(!mouseenter_position){console.error('N?')
return;mouseenter_position={x:e.clientX,y:e.clientY}}
var deltaX=Math.round((e.clientX-mouseenter_position.x)/40);if(deltaX>10)deltaX=10;if(deltaX<-10)deltaX=-10;deltaX*=2;$ok1vn.css('left',-deltaX+30)
$ok2vn.css('left',-deltaX+30)
$ok2vn.css('clip','rect(0px,'+($ok2basewidth_int+(deltaX-30)*2)+'px,'+($ok2baseheight_int)+'px,0px)')/$ok3.css('width',$ok3basewidth_int-(-deltaX+30))}
$('.проект:not(.myprofileproject)').on('mousemove',onProjectMouseMove);function getMarginX(){return $(window).width()*0.15}
function getMarginXprop(){return 0.15}
jQuery.fn.reverse=[].reverse;var Timer={$timer:$('#круг'),$line:is_safari?$(''):$('#линия'),$train:$('#поезд'),lineTimeout:-1,zoomOutTimestamp:0,initialScrollLeft:-1,leftBoundary:0,rightBoundary:0,timer_offsetX:undefined,timer_offsetY:undefined,timer_start_x:undefined,throttleLastNavigateTimeout:-1,prs_x:[],prs_centers:[],timer_animation:undefined,le_timeout:-1,updateLine:function(){this.$line.width((100-parseInt($('#поезд').scrollLeft())/getMaxScrollLeft()*100)+'%')},animateUpdateLine:function(nxScrollLeft){this.$line.animate({width:(100-parseInt(nxScrollLeft)/getMaxScrollLeft()*100)+'%'})},onMouseMove:function(e){e.clientX=e.clientX||e.originalEvent.touches[0].clientX;e.clientY=e.clientY||e.originalEvent.touches[0].clientY;window.xee=window.xee||0;window.xee=window.xee+1;window.xee=window.xee%6;if(is_chrome||is_firefox||window.xee==0){this.$timer.stop(!1,!1).css({transform:'translateY('+(Math.max(30,Math.min(e.clientY-this.timer_offsetY,$(window).height()-100)))+'px) translateX('+(e.clientX-this.timer_offsetX)+'px)'},{easing:'easeOutCirc',duration:2400})}
window.timerY=(e.clientY-this.timer_offsetY)+'px'
var inner_max_x_timer=$(window).width()-2*getMarginX();var inner_x_timer=e.clientX-this.timer_offsetX-getMarginX();directionX=e.originalEvent.movementX||e.originalEvent.mozMovementX||e.originalEvent.webkitMovementX||e.movementX||e.mozMovementX||e.webkitMovementX||0;if(directionX<0){clearTimeout(this.lineTimeout);this.$line.css({transform:'skewX(45deg)'})}
this.lineTimeout=setTimeout(()=>{this.$line.css({transform:'skewX(0deg)'})},500);if(inner_x_timer*getMaxScrollLeft()/inner_max_x_timer<this.leftBoundary-$(window).width()/2)
inner_x_timer=(this.leftBoundary-$(window).width()/2)*inner_max_x_timer/getMaxScrollLeft();if(inner_x_timer*getMaxScrollLeft()/inner_max_x_timer>this.rightBoundary-$(window).width()/2)
inner_x_timer=(this.rightBoundary-$(window).width()/2)*inner_max_x_timer/getMaxScrollLeft();if(!is_safari){window.lineToo=setTimeout(()=>{var pcccc=((e.clientX-this.timer_offsetX)-getMarginX())/($(window).width()-2*getMarginX());pcccc=Math.min(1,Math.max(0,pcccc))
this.$line.stop().animate({'width':(1-pcccc)*100+'%'},{easing:'easeOutCirc',duration:1500})},150)}
if(is_chrome||is_firefox||window.xee==0){this.$train.stop(!1).animate({scrollLeft:inner_x_timer*getMaxScrollLeft()/inner_max_x_timer},{easing:'easeOutCirc',duration:is_safari?1600:1200})}
var amount=((inner_x_timer*getMaxScrollLeft()/inner_max_x_timer)-this.initialScrollLeft)/30
amount=-amount;var $choochoo=this.$train;var initialScrollLeft=this.initialScrollLeft;if(is_safari&&$(window).width()>1800)return;$('#коробка .цветной').each(function(index){if(!$(this).data('base_bg'))
$(this).data('base_bg',parseInt($(this).css('background-position-x')));var based_bg=$(this).data('base_bg');if(Math.abs(window.mousemovebaseindex-index)<3)
var el_ratio=2.4;else{switch(window.mousemovebaseindex-index)
{case 3:based_bg-=100
break;case 4:based_bg-=147
break;case 5:based_bg-=220
break;case-3:based_bg+=100
break;case-4:based_bg+=147
break;case-5:based_bg+=220
break}
var el_ratio=2.4}
if(window.skipLateAnimationsOnce&&Math.abs(window.mousemovebaseindex-index)>3)
{$(this).css({"background-position-x":based_bg-((inner_x_timer*getMaxScrollLeft()/inner_max_x_timer)-initialScrollLeft)/15+"px"})}
else{$(this).stop().animate({"background-position-x":based_bg-((inner_x_timer*getMaxScrollLeft()/inner_max_x_timer)-initialScrollLeft)/15+"px"},{easing:'easeOutCubic',duration:1400})}});window.skipLateAnimationsOnce=!1},onMouseUp:function(e){$(document).off('mousemove.timer')
$(document).off('mouseup.timer')
$('html').addClass('center_titles')
$('.цветной, .фотография').stop().css({'background-position-x':''});$('.название, .субтитр').stop().css({'transform':''});setTimeout(()=>{$('#круг').removeClass('active');var closest_i=0,xcenter,$closest;$closest=$('#коробка .проект').eq(0);$('#коробка .проект').each(function(i){if($(this).offset().left+$(this).width()<$(window).width()){closest_i=i;$closest=$(this)
xcenter=$(this).offset().left+$(this).width()/2+$('#поезд').scrollLeft()}})
this.changeText($('#коробка .проект').length-closest_i);$('#коробка .проект').removeClass('текущий');$closest.addClass('текущий');var new_scroll_position=parseInt(xcenter)-$(window).width()/2;var the_old_one=$('#коробка').css('transformOrigin');$('#коробка').css({transformOrigin:this.prs_centers[closest_i]+'px 50%'});var newer_scroll_position=$closest.offset().left+$closest.width()/2+$('#поезд').scrollLeft()-$(window).width()/2;$('#коробка').css({transformOrigin:the_old_one});var inner_max_x_timer=1-2*getMarginXprop();var inner_x_timer=newer_scroll_position*inner_max_x_timer/getMaxScrollLeft();var newTimerX=getMarginXprop()+inner_x_timer;var pcccc=((newTimerX*$(window).width()-this.timer_offsetX)-getMarginX())/($(window).width()-2*getMarginX());pcccc=Math.min(1,Math.max(0,pcccc))
window.lineToo&&clearTimeout(window.lineToo)
this.$line.stop().animate({width:(1-pcccc)*100+'%'});if(window.timerY&&window.timerY.indexOf('px')!==-1)
window.timerY=100*(parseInt(window.timerY)/$(window).height())+"vh";$('#круг').stop(!1).css('transform','translateX('+newTimerX*100+'vw) translateY('+window.timerY+')');var thisTimer=this;$('#круг circle.stroke').stop(!0).animate({'stroke-dashoffset':'259'},1000,function(){thisTimer.zoomOutTimestamp=0;thisTimer.startCarrousel()})
setTimeout(()=>{$('html').removeClass('blocktimermousedown')},1000)
$('html').removeClass('cursormove');$('#поезд').animate({scrollLeft:new_scroll_position},function(){$('#коробка').css({transformOrigin:thisTimer.prs_centers[closest_i]+'px 50%'});$('#поезд').scrollLeft($closest.offset().left+$closest.width()/2+$('#поезд').scrollLeft()-$(window).width()/2);$('.blues').css({left:thisTimer.prs_centers[closest_i]});thisTimer.prepareForZoomIn();$('#коробка').removeClass('shrunk')})},Math.max(0,850-(Date.now()-this.zoomOutTimestamp)))},prepareForZoomIn(){if(is_safari)return;$('.окно-1 .внутри, .окно-2 .внутри, .окно-3').css({'transition-delay':'.3s, .3s','transition-duration':'.2s, 3s'})
setTimeout(()=>{$('.окно-1 .внутри, .окно-2 .внутри, .окно-3').css({'transition-delay':'','transition-duration':''})},310)},updateDaKrug($newel){var newer_scroll_position=$newel.offset().left+$newel.width()/2+$('#поезд').scrollLeft()-$(window).width()/2;$('#поезд').animate({scrollLeft:newer_scroll_position},{duration:500,easing:'easeOutQuad'});Timer.animateUpdateLine(newer_scroll_position);this.changeText($('#коробка .проект').length-$newel.index());var inner_max_x_timer=1-2*getMarginXprop();var inner_x_timer=newer_scroll_position*inner_max_x_timer/getMaxScrollLeft();var newTimerX=getMarginXprop()+inner_x_timer;$('#круг').stop(!1).css({transform:'translateX('+newTimerX*100+'vw) translateY('+window.timerY+')'},500);setTimeout(()=>{this.startCarrousel()},600)},navigate:function(dir,loop){if(dir=='left'){this.prepareForZoomIn();var $pr=$('.проект.текущий');setTimeout(()=>{$prev=$pr.prevAll('.проект').eq(0);if(!$prev.length)
{if(loop){$prev=$('#коробка .проект').last()}
else return}
setTimeout(()=>{$prev.addClass('текущий')},650)
this.timer_animation&&this.timer_animation.stop();$('#круг circle.stroke').css({'stroke-dashoffset':'259'});setTimeout(()=>{$pr.removeClass('текущий')},300)
this.updateDaKrug($prev)},200)}else if(dir=='right'){setTimeout(()=>{this.prepareForZoomIn();var $pr=$('.проект.текущий');$next=$pr.nextAll('.проект').eq(0);if(!$next.length)
return;setTimeout(()=>{$next.addClass('текущий')},650)
this.timer_animation&&this.timer_animation.stop();$('#круг circle.stroke').css({'stroke-dashoffset':'259'});setTimeout(()=>{$pr.removeClass('текущий')},300)
this.updateDaKrug($next)},200)}},throttleLastNavigate:function(dir){clearTimeout(this.throttleLastNavigateTimeout);this.throttleLastNavigateTimeout=setTimeout(()=>{this.navigate(dir)},50)},initEvents:function(){var thisTimer=this;$(document).on('keydown',(e)=>{if($('html').hasClass('big')||$('#коробка').hasClass('shrunk')||!$('html').hasClass('loadingover')||$('html').hasClass('loading')||$('html').hasClass('showmyprofile'))
return;if(e.keyCode==37){thisTimer.navigate('left');return!1}else if(e.keyCode==39){thisTimer.navigate('right');return!1}})
this.$timer.on('mouseover',function(e){if($('.sixtyten').text()!=='01')return;$('#круг').addClass('hover');if(thisTimer.zoomOutTimestamp==0){thisTimer.timer_animation&&thisTimer.timer_animation.stop();$('#круг circle.stroke').animate({'stroke-dashoffset':'108'},200)}});this.$timer.on('mouseout',function(e){if($('.sixtyten').text()!=='01')return;$('#круг').removeClass('hover');if(thisTimer.zoomOutTimestamp==0){thisTimer.timer_animation&&thisTimer.timer_animation.stop(!0);$('#круг circle.stroke').animate({'stroke-dashoffset':'259'},700,()=>{thisTimer.startCarrousel(!0)})}});this.$timer.on('mousedown touchstart',function(e){if($('html').hasClass('blocktimermousedown'))
return;window.timermousedowntimestamp=Date.now();$('html').addClass('blocktimermousedown')
$('.sixtyten').text('01');$(this).stop(!1);$('#круг').addClass('active');$('html').removeClass('center_titles')
$('.цветной').each(function(index){$(this).removeData('base_bg')});$('.название').stop().css({transform:'translateY(-50%) translateX(0px)'})
$('.субтитр').stop().css({transform:'translateX(0px)'})
thisTimer.zoomOutTimestamp=Date.now();thisTimer.initialScrollLeft=$('#поезд').scrollLeft();e.offsetX=e.offsetX||0;e.offsetY=e.offsetY||0;thisTimer.timer_offsetX=e.offsetX;thisTimer.timer_offsetY=e.offsetY;$(document).on('mousemove.timer touchmove.timer',(e)=>{thisTimer.onMouseMove(e)})
$(document).on('mouseup.timer touchend.timer',(e)=>{if(!window.timermousedowntimestamp)
return;if(!window.mouseupwillbetimerup&&Date.now()-window.timermousedowntimestamp<400){window.mouseupwillbetimerup=!0;return}
window.mouseupwillbetimerup=!1;$(document).off('mousemove.timer touchmove.timer');$(document).off('mouseup.timer touchend.timer');thisTimer.onMouseUp(e)});$('#коробка .проект').each(function(i){thisTimer.prs_x[i]=$(this).css('left');thisTimer.prs_centers[i]=$(this).offset().left+$(this).width()/2+$('#поезд').scrollLeft()})
var $pr=$('#коробка .проект.текущий');$('#коробка').css({transformOrigin:$pr.css('left')+' 50%'});window.skipLateAnimationsOnce=!0;window.mousemovebaseindex=$pr.index();thisTimer.leftBoundary=parseInt($pr.css('left'))-0.8*(parseInt($pr.css('left'))-parseInt(thisTimer.prs_x[0]));thisTimer.rightBoundary=parseInt($pr.css('left'))+0.8*(parseInt(thisTimer.prs_x[thisTimer.prs_x.length-1])-parseInt($pr.css('left')));$('#коробка').addClass('shrunk');$('html').addClass('cursormove');e.preventDefault();return!1})},changeText:function(nb,first){$('#круг p').css('transform','translateX(-'+(nb-1)+'00%)');$('#круг circle').css('fill',$('#коробка .проект').reverse().eq(nb-1).attr('data-fill'));if(!first)
$('.sixtyten').text('01')},initCarrousel:function(){},startCarrousel:function(delayed){var thisTimer=this;setTimeout(()=>{if($('#круг').is('.active')||$('#круг').is('.hover'))
return;$('#круг circle.stroke').css({'stroke-dashoffset':'259'});this.timer_animation=$('#круг circle.stroke').stop(!0).animate({'stroke-dashoffset':'108'},7500,'linear',function(){if($('html').hasClass('big')||$('html').hasClass('profile')||$('html').hasClass('shrunk')){return}
thisTimer.navigate('left',!0);$(this).css({'stroke-dashoffset':'259'})})},delayed?700:1000)},}
var $okToReset=$('');function unbindProjectPageEvents(do_not_destroy_only_reconcile){$('html').removeClass('cursormove');$('html').removeClass('videonotready');$('html').removeClass('pfnoqq')
$('video').off('canplaythrough');$('.wrapper.first').css('opacity','');$('html').removeClass('blocktimermousedown');$('.hide_me_please').removeClass('hide_me_please');$('.hides_the_header_background').css('background-color','')
$('.проект').removeClass('fakehover');$('.проект').removeClass('mqv');$('video').removeClass('active').each(function(){this.currentTime=0;this.pause()});$('.animation').attr({"from":svgCoords.play,"to":svgCoords.pause}).get(0).beginElement();$('.play-pause-btn').css({opacity:''});$('.mbb').css('height','');$('.loading-pc').css({transition:'',transform:''});$('html').removeClass('bigx');$('html').removeClass('readyforhover');setTimeout(()=>{$('html').removeClass('ffhash')},900)
$('.benjamin_bottom').css('z-index','');$('.benjamin_bottom').insertBefore('#линия');$('.x_profile').insertBefore('#линия');$('.black').appendTo('.myprofile');if(!do_not_destroy_only_reconcile){ss&&ss.destroy();ss=!1}else{sslisteners.forEach((m)=>{ss.removeListener(m)});sslisteners=[]}
$(window).off('resize.getindatoppah');$(window).off('resize.getindatoppah2');$(window).off('resize.centerer');$(window).off('resize.mbautoman');$('.страница').css({'margin-bottom':'',transform:'',transition:'',opacity:'',top:'',display:''});$('.страница').removeClass('old');$('.страница').removeClass('mqv');$('.страница').removeClass('wasbig');$('.страница').removeClass('startcolor');$('.страница').removeClass('canshowbefore');$('#коробка .проект').css({transition:'',width:'',top:'',position:'',left:'',clip:'','z-index':'',height:'',transform:'',visibility:'','transform-origin':''});$('html').removeClass('big_half');$(window).off('scroll.screens').off('scroll.video').off('scroll.unvideo').off('scroll.prefooter').off('scroll.footer').off('scroll.xprofile');$('.название, .субтитр').css({opacity:''});$('#коробка, #поезд').css({display:''});$('.фотография').removeClass('parallax');skip=!0;window.location.hash='';$okToReset.css({transition:'',opacity:'',clip:''});$okToReset=$('')}
var big_active_real_i=274;var onProjectClick=function(e){if(window.preventPClick){window.preventPClick=!1;return!1}
if($(this).parents('.benjamin_bottom').length&&!$('html').hasClass('big_half'))
return!1;function getRespratio(){return Math.max(1,0.460*$(window).height()/393)}
function getRespratio2(){return Math.max(1,0.520*$(window).height()/433)}
if($('#коробка').hasClass('shrunk'))
return!1;if($('#коробка .текущий').length&&$(this).is('#коробка .проект:not(.текущий)')){if($(this).nextAll('.текущий').length)
Timer.navigate('left')
else Timer.navigate('right')
return!1}
var wasbig=$('html').hasClass('big');if(wasbig&&$(this).is('#коробка .проект')){return!1}
if($(this).hasClass('comingsoon'))return
$('html').removeClass('center_titles');unbindProjectPageEvents(wasbig);var $oldc=$('.страница.active').addClass('old');$('#круг circle.stroke').stop(!1);skip=!0;window.location.hash=$(this).find('.название').text().toLowerCase();var $pr=$('.проект.текущий');if(wasbig)
$pr=$('.benjamin_bottom .проект');if(wasbig)
$('.absolute_madman').html('');if(!wasbig)
$('#коробка').css({transformOrigin:$pr.css('left')+' 50%'});var nohay=$(this).index()+1;if(wasbig){nohay=big_active_real_i-1;if(nohay<2)
nohay=$('#коробка .проект').length}
big_active_real_i=nohay;if(wasbig)
$(this).css({zIndex:'9999'});if(wasbig)
{$(this).removeClass('at_the_bottom')}
var wscT=ss&&ss.scrollTop;if(wasbig){$('#коробка, #поезд').css({display:'none'});if(is_safari&&$(window).width()>1800)
$oldc.css('display','none')
$oldc.css({transform:'translateY(-'+wscT+'px)',transition:'none'}).each(function(){setTimeout(()=>{$(this).css({transition:''})},500)});$(window).scrollTop(0);ss&&ss.setPosition(0,0);$(this).find('.фотография').css('opacity',0)
$(this).appendTo('.absolute_madman')
setTimeout(()=>{$(this).find('.фотография').css('opacity','')
$(this).addClass('finish_him')},200)
$('.hides_the_footer').height(Math.PI)}
if($(window).width()>1800&&!wasbig)
$(this).addClass('mqv');$('html').addClass('big');$c=$('.страница-'+(nohay));if($(window).width()>=1800){$c.addClass('mqv')}
if(wasbig){$c.addClass('wasbig')}
if($(window).width()>1800&&is_safari&&!wasbig)$c.css('top','37vh')
else $c.css({top:''})
$c.addClass('preactive');if(!wasbig&&!(is_safari&&$(window).width()>1800))
$c.addClass('canshowbefore')
setTimeout(()=>{$(this).css({transition:'transform .5s, transform-origin .5s, clip .5s'});var animations={}
animations.left='calc('+$('#поезд').scrollLeft()+'px + 50vw)';if(wasbig)
animations.left='0px'
animations.top='234px'
animations.top=(196.5+20)+'px'
animations.top=(0.460*$(window).height()/2+20)+'px'
animations.top='24vh';if(!wasbig&&is_safari&&$(window).width()>1800)
animations.top=371*getRespratio()/2+'px'
if(wasbig)
animations.top='0px'
if(!wasbig)
animations.width='102vw'
setTimeout(()=>{$(this).css({clip:'rect(0,104vw,48.01vh,0)'})},50)
animations.height='48.0vh'
if(wasbig)$(this).css({height:animations.height},20)
if(!wasbig)
{if(!is_safari||($(window).width()>1800))
$(this).css({transform:'translateX(-50%) translateY(-50%) scale('+getRespratio()+')'})}
else{if(!is_safari)
$(this).css({transform:'scale('+getRespratio()+')'})}
setTimeout(()=>{if(!is_safari||$(window).width()<1800||wasbig)
$(this).css({'transform-origin':'top center'})
$('html').addClass('parallax-borders')
$oldc.css({transition:'none'});setTimeout(()=>{if(wasbig&&!is_safari&&$(window).width()<=1800)
$c.addClass('canshowbefore')},300)
$oldc.animate({opacity:0,top:(395-(parseInt($(this).css('top'))-45))+'px'},wasbig?500:350,wasbig?'easeOutQuad':'easeInQuad',function(){setTimeout(()=>{$(this).css({opacity:'',top:''})
setTimeout(()=>{return;$(this).css({transform:'',transition:''})},10)},1000)});setTimeout(()=>{if($(window).width()<1800){$c.find('.whitebg').css({visibility:'hidden'});var ddelay=600-150;if(is_safari)
ddelay+=200;if(!wasbig&&!is_safari)
ddelay-=150;if(is_safari)
ddelay-=50;if($c.hasClass('.страница-3')||$c.hasClass('.страница-2'))
ddelay=1;setTimeout(()=>{$c.find('.whitebg').css({visibility:'visible'})},ddelay)}
else{if(wasbig){$c.find('.whitebg').css({visibility:'hidden'});var ddelay=150-50;if(is_safari)
ddelay-=50;if(is_safari)
ddelay-=200;if($c.hasClass('.страница-3')||$c.hasClass('.страница-2'))
ddelay=1;if(!wasbig)
ddelay-=100;setTimeout(()=>{$c.find('.whitebg').css({visibility:'visible'})},ddelay)}}
if(is_safari&&!wasbig)
{if($(window).width()<1800)
{$(this).animate({width:animations.width,height:animations.height},250,"easeInQuad",()=>{delete animations.width
$(this).css('top','50vh')
$(this).animate({top:animations.top},300,"easeOutQuad",()=>{delete animations.top
THIS_IS_THE_NEW_CENTIPEEEDEEEE()})})}else{$(this).css('transition','')
$(this).css('transition-delay','0s, 0s, 0s, 0s')
delete animations.height;setTimeout(()=>{$(this).css({width:animations.width})
setTimeout(()=>{delete animations.width
$(this).css('top','50vh')
$(this).css('transition','none')
$(this).animate({top:animations.top},600,"easeOutQuad",()=>{delete animations.top
THIS_IS_THE_NEW_CENTIPEEEDEEEE()})},100)},10)}}
else{setTimeout(()=>{THIS_IS_THE_NEW_CENTIPEEEDEEEE()},1)}
if(is_safari&&wasbig)$c.removeClass('canshowbefore')
var dDelay;if(is_safari)
dDelay=330-130+100-100-100-100-150+150+200-100;else{dDelay=330-130+100-100-100-100-150;if($(window).width()>1800&&wasbig)
dDelay+=330-100-50-50+150+150-120}
if(!wasbig&&$(window).width()<=1800&&!is_safari)
dDelay-=150;if($(window).width()<=1800&&wasbig)
dDelay=60;if(!wasbig)
dDelay=1;if($(window).width()>1800&&wasbig)
dDelay=210;if(is_safari&&!wasbig&&$(window).width()>1800)
dDelay=150;if(is_safari&&wasbig)
dDelay-=200;if($c.hasClass('.страница-3')||$c.hasClass('.страница-2'))
dDelay=1;if(!wasbig)
dDelay-=100;setTimeout(()=>{$c.addClass('active')},dDelay)
var THIS_IS_THE_NEW_CENTIPEEEDEEEE=()=>{$(this).animate(animations,wasbig?500:350+100+150-100-100,wasbig?'easeOutQuad':'easeOutQuad',function(){var top='189px';var top=(0.460*$(window).height()/2)+'px';var top=196.5;var top='24vh'
if(wasbig)
top='0px';setTimeout(()=>{if(wasbig){if(is_safari){$(this).css({position:'fixed',top:'0',left:'0','z-index':'-10',transition:'transform .5s','transform-origin':'top center'})}else{$(this).css({position:'fixed',top:'0',left:'0','z-index':'-10',transition:'transform .5s',transform:'scale('+getRespratio()+')','transform-origin':'top center'})}}else{$(this).css({position:'fixed',top:(is_safari&&$(window).width()>1800)?'185.5px':'24vh',left:'50vw','z-index':'-10',transition:'transform .5s',transform:'translateX(-50%) translateY(-50%) scale('+getRespratio()+')','transform-origin':'top center'})}
$(window).on('resize.getindatoppah',()=>{if(!wasbig){$(this).css({transform:'translateX(-50%) translateY(-50%) scale('+getRespratio()+')'})}else{$(this).css({transform:'scale('+getRespratio()+')'})}})
$('.страница:not(.страница-'+nohay+')').removeClass('active').removeClass('preactive').find('.фотография').removeClass('parallax');$('html').addClass('bigx');$next=$('#коробка .проект').eq(nohay-1).prev('.проект:not(.comingsoon)');if($next.length==0){$next=$('#коробка .проект').last()}
$next_index=$next.index()+1;$('.benjamin_bottom');$next=$next.clone(!1).addClass('hide_me_please').on('click',onProjectClick).appendTo('.benjamin_bottom').addClass('at_the_bottom');$next.css({transform:'scale('+getRespratio2()+')','transform-origin':'bottom center'})
$(window).on('resize.getindatoppah2',()=>{$next.css({transform:'scale('+getRespratio2()+')','transform-origin':'bottom center'})})
if(getRespratio2()==1)
$c.find('.mbb').css({'height':'540px'});$(window).on('resize.mbautoman',()=>{if(getRespratio2()==1)
$c.find('.mbb').css({'height':'540px'});else $c.find('.mbb').css({'height':''})});$c.find('.wrapper.first').animate({opacity:1});function getDecal(){return $(window).width()-668}
$next.addClass('full');$next.find('.окно-centerer').css({transform:'translateX('+getDecal()/2+'px) translateY(0px)'})
$(window).on('resize.centerer',()=>{$next.find('.окно-centerer').css({transform:'translateX('+getDecal()/2+'px) translateY(0px)'})})
var $ph=$(this).find('.фотография');var ph_initial=parseInt($ph.css('background-position-y'));if(!ss)
ss=Scrollbar.init(document.querySelector('.apply-scroll-here'),{speed:1.8,damping:0.10,overscrollDamping:0.19,thumbMinSize:44,continuousScrolling:!1});$('.x_profile').appendTo('.apply-scroll-here');$('.benjamin_bottom').appendTo('.apply-scroll-here');setTimeout(()=>{$next.removeClass('hide_me_please')
var $ecran=$c.find('.экран');var bighalfmagic=()=>{if($ecran.length){var delta=(ss.scrollTop-($ecran.offset().top+ss.scrollTop))/($(window).height()*2)+0.5;$ecran.css({'background-position':'center '+Math.round((delta*400)-200)+'px'})}
if(ss.scrollTop>$(document).height()/2){$('html').addClass('big_half')}else{$('html').removeClass('big_half')}};ss.addListener(bighalfmagic);sslisteners.push(bighalfmagic);var $c_videocontainer=$c.find('.видео-container')
if($c_videocontainer.length)
{var isPlaying=!1;$c.find('video').each(function(){if(is_safari)
$(this).prop('src',$(this).data('real-src'));$(this).prop('preload','auto');$('html').addClass('videonotready');this.load();this.addEventListener('canplaythrough',function(){$('html').removeClass('videonotready')},!1);this.addEventListener('ended',function(){$(this).parent().find('.animation').attr({"from":svgCoords.play,"to":svgCoords.pause}).get(0).beginElement();$(this).get(0).pause();isPlaying=!isPlaying;$(this).parent().find('.play-pause-btn').css({opacity:'1'});$(this).removeClass('active')},!1)});$c_videocontainer.on('click',function(){if(!isPlaying){$(this).find('.animation').attr({"from":svgCoords.pause,"to":svgCoords.play}).get(0).beginElement();$c_videocontainer.find('video').addClass('active').get(0).play()}
else{$(this).find('.animation').attr({"from":svgCoords.play,"to":svgCoords.pause}).get(0).beginElement();$c_videocontainer.find('video').get(0).pause()}
isPlaying=!isPlaying;if(isPlaying){$(this).find('.play-pause-btn').css({opacity:1});setTimeout(()=>{$(this).find('.play-pause-btn').css({opacity:0})},30)}else{$(this).find('.play-pause-btn').css({opacity:''})}})}
$next.addClass('текущий');$next.find('.окно').each(function(){$(this).data('base-окно-left',parseInt($(this).css('left')))
$(this).data('base-окно-width',parseInt(window.getComputedStyle($(this).get(0))['width']));$(this).data('base-окно-height',parseInt(window.getComputedStyle($(this).get(0))['height']));$(this).data('base-образ-bgx',parseInt($(this).find('.образ').css('background-position-x')))});var $ok1=$(''),$ok2=$(''),$ok3=$(''),$ok1vn=$(''),$ok2vn=$(''),$ok3vn=$(''),$ok2basewidth_int=0,$ok2baseheight_int=0;$next.each(function(){$ok1=$(this).find('.окно-1')
$ok1basewidth_int=parseInt($ok1.data('base-окно-width'))
$ok1baseheight_int=parseInt($ok1.data('base-окно-height'))
$ok1vn=$ok1.find('.внутри')
$ok2=$(this).find('.окно-2')
$ok2basewidth_int=parseInt($ok2.data('base-окно-width'))
$ok2baseheight_int=parseInt($ok2.data('base-окно-height'))
$ok2vn=$ok2.find('.внутри')
$ok3=$(this).find('.окно-3')
$ok3basewidth_int=parseInt($ok3.data('base-окно-width'))
$ok3baseheight_int=parseInt($ok3.data('base-окно-height'))
$okToReset=$ok1.add($ok2).add($ok3).add($ok1vn).add($ok2vn).css({transition:'none'})});$next.addClass('no_text_animation')
$next.addClass('text_me_baby');$next.find('.название, .субтитр').css({opacity:0})
var $textuals=$next.find('.название, .субтитр');var $bananas=$('<div></div>').css({position:'absolute',top:'0',left:'0',right:'0',bottom:'0','background':'black',opacity:'0.6','pointer-events':'none'})
$next.append($bananas)
$bennylewis=$('.benjamin_bottom')
bennygotbenned=!1;var trioMagic=()=>{var documentHeight=ss.getSize().content.height;if(ss.scrollTop+$(window).height()>documentHeight-350-150){var progress=((documentHeight-(ss.scrollTop+$(window).height()))/350);$textuals.css({opacity:1-progress})
var progress_du_soir=((documentHeight-(ss.scrollTop+$(window).height()))/200);$ok1vn.css('clip','rect(0px,'+((1-progress_du_soir)*$ok1basewidth_int)+'px,'+($ok1baseheight_int)+'px,0px)')
$ok2vn.css('clip','rect(0px,'+($ok2basewidth_int/2+(1-progress_du_soir)*$ok2basewidth_int/2)+'px,'+($ok2baseheight_int)+'px,'+($ok2basewidth_int/2-(1-progress_du_soir)*$ok2basewidth_int/2)+'px)')
$ok3.css('clip','rect(0px,'+($ok3basewidth_int)+'px,'+($ok3baseheight_int)+'px,'+(progress_du_soir*$ok3basewidth_int)+'px)')
$ok1.add($ok2).add($ok3).css('opacity',1-progress*progress)
$bananas.css('opacity',Math.min(0.6,Math.max(0,progress_du_soir-0.6)))}
if(ss.scrollTop+$(window).height()>documentHeight-50){$('.benjamin_bottom').css('pointer-events','')}
else{$('.benjamin_bottom').css('pointer-events','none')}}
ss.addListener(trioMagic);sslisteners.push(trioMagic);$next.removeClass('текущий');var current=$(this).hasClass('textover-lighttext')?'light':'dark',$nextxp=$('');if(current=='dark'){$('.x_profile .dark').css({clip:''})}else{$('.x_profile .dark').css({clip:'rect(0,100vw,0,0)'})}
var $textovers=$c.find('.textover')
var xprofilemagic=()=>{var $nextxn=$textovers.filter(function(){return $(this).offset().top+ss.scrollTop>ss.scrollTop}).first()
$nextxp=$nextxn;if(!$nextxn.length){return}
if($nextxn.hasClass('textover-lighttext')){$('.x_profile .dark').css({clip:'rect(0,100vw,'+($nextxn.offset().top+ss.scrollTop-ss.scrollTop)+'px,0)'})}else if($nextxn.hasClass('textover-darktext')){$('.x_profile .dark').css({clip:'rect('+($nextxn.offset().top+ss.scrollTop-ss.scrollTop)+'px, 100vw, '+$(window).width()+'px, 0)'})}};ss.addListener(xprofilemagic);sslisteners.push(xprofilemagic);$('.scroll-content').css({height:$(document).height()});$('.hides_the_footer').height($(document).height()-545)
if(wasbig){$('#коробка .проект').css({transition:'',width:'',top:'',position:'',left:'','z-index':''})}},10)},600)})}},is_safari?10:1)},is_safari&&$(window).width()>1800&&!wasbig?500:1)},wasbig?800:600)}
$('#коробка .проект').click(onProjectClick)
var svgCoords={pause:"M11,10 L18,13.74 18,22.28 11,26 M18,13.74 L26,18 26,18 18,22.28",play:"M11,10 L17,10 17,26 11,26 M20,10 L26,10 26,26 20,26"};var sslisteners=[];$('.profile').click(()=>{$('#круг circle.stroke').stop(!1);var wuzbig=$('html').hasClass('big');$('.dontlook').animate({opacity:1},200,'easeOutQuad',()=>{setTimeout(()=>{$(window).scrollTop(0);$(document).scrollTop(0);$('body,html').scrollTop(0);$('html').removeClass('big big_half');unbindProjectPageEvents();setTimeout(()=>{if(!ss)
ss=Scrollbar.init(document.querySelector('.apply-scroll-here'),{speed:1.8,damping:0.10,overscrollDamping:0.19,thumbMinSize:44,continuousScrolling:!1});ss.scrollTo(0,0);$('.black').appendTo('.apply-scroll-here');$('.x_profile').appendTo('.apply-scroll-here');$('#круг circle.stroke').stop(!1);skip=!0;window.location.hash='profile';$('.окно-centerer').css({transform:''})
$('.hides_the_footer').css({height:''})
$('.страница').removeClass('preactive active');$('.absolute_madman, .benjamin_bottom').html('');$('.проект').css({transition:'',width:'',top:'',position:'',left:'',"z-index":''})
$('html').addClass('preshowmyprofile');setTimeout(()=>{$('html').addClass('showmyprofile');setTimeout(()=>{$('html').addClass('readyforhover')},1000)
$('.dontlook').animate({opacity:0},1000,'easeOutQuad')
var $hop=$('.black .centered > *').css('opacity',0);var george_harrison=()=>{var documentHeight=ss.getSize().content.height;if(ss.scrollTop+$(window).height()>documentHeight-$(window).height()*0.77){var progress=((documentHeight-(ss.scrollTop+$(window).height()))/($(window).height()*0.77));var logical_progress=1-progress;$hop.each(function(i){var start=-3.2+i*0.8;var op=(start+logical_progress*(1-start));if(i==4)
op=(-0.3+op)/0.7;$(this).css('opacity',op)})}
if(ss.scrollTop+$(window).height()>documentHeight-$(window).height()*0.30){$('html').addClass('pfnoqq')}
else{$('html').removeClass('pfnoqq')}}
ss.addListener(george_harrison);sslisteners.push(george_harrison)},250)},wuzbig&&is_firefox?3500:500)},250+200)});return!1});$('.x').click(()=>{$('.dontlook').animate({opacity:1},200,'easeOutQuad',()=>{setTimeout(()=>{$('html').removeClass('big big_half showmyprofile preshowmyprofile');unbindProjectPageEvents();$('.окно-centerer').css({transform:''})
$('.hides_the_footer').css({height:''})
$('.страница').removeClass('preactive active');$('.absolute_madman, .benjamin_bottom').html('');$('.проект').css({transition:'',width:'',top:'',position:'',left:'',"z-index":''})
$('html').addClass('force_ph');$('html').addClass('loading');setTimeout(()=>{reopenTheLight();$('.dontlook').animate({opacity:0},1000,'easeOutQuad')},250)},250)});return!1})
Timer.initEvents();Timer.initCarrousel();var $train=$('#поезд'),train=$train.get(0);function getMaxScrollLeft(){return train.scrollWidth-train.clientWidth}
function letHim(){please_let_me_go=!1;$goto.trigger('click');$('.loader').css({clip:''})
$('html').removeClass('force_ph');if($goto.is('.проект'))
$goto.addClass('текущий');$('html').addClass('loadingover');$('.loader').removeClass('loader');return}
function openTheLight(){var opened=!1,imagesloaded=!1,preanimcompleted=!1;var no_line=please_let_me_go&&$goto.is('.profile');if(no_line){$('.loading-pc').css({transition:'none',transform:'translateY(-50%) translateX(-50%)'})}
function openItOnceIfFull(){if(!imagesloaded||!preanimcompleted)return;if(opened)return;opened=!1;if(please_let_me_go&&no_line){$('.dontlook').css({opacity:1});setTimeout(()=>{$('html').removeClass('loading');$('html').addClass('loadingover');letHim()},700)
return}
$('html').removeClass('loading')
$('#круг').css('z-index','-1')
$('#круг').css('visibility','hidden')
var $final_active=please_let_me_go?$goto:$('.kandinsky');setTimeout(()=>{$('.loader').css({clip:''})
if(no_line){letHim();return}
$('#линия').animate({width:'0%'},1700,'easeOutCubic');$train.animate({scrollLeft:please_let_me_go?(parseInt($goto.offset().left))+$train.scrollLeft()+$goto.width()/2-$(window).width()/2:$('#коробка .проект:last').offset().left+$train.scrollLeft()+$('#коробка .проект:last').width()/2-$(window).width()/2},1700+300,'easeOutQuint');setTimeout(()=>{$('#круг').css('visibility','visible')
setTimeout(()=>{$('#круг').css('z-index','')
$('#круг').css('visibility','')},1500);$('#круг').css({transform:'translateX('+(100-100*getMarginXprop())+'vw) translateY(48vh)'},3000,'easeOutQuint');window.timerY='48vh'},2000)
setTimeout(()=>{Timer.changeText(1,!0)},200+500+1300)
setTimeout(()=>{setTimeout(()=>{if(!please_let_me_go)
$('html').removeClass('force_ph')},0)
setTimeout(()=>{if(!please_let_me_go)
$final_active.addClass('текущий')},400)
setTimeout(()=>{setTimeout(()=>{},1600);$('html').addClass('loadingover');$('.loader').removeClass('loader');if(please_let_me_go){letHim()}},please_let_me_go?1:1600)},please_let_me_go?1:400+800)},350+200)}
$('.loader').css({clip:'rect(185px,336px,186px,332px)'})
var $pc=$('.loading-pc');var displayed_pcc=0;var actual_pcc=0;var too=-1;function bam(){clearTimeout(too);too=setTimeout(()=>{displayed_pcc=displayed_pcc+1;$pc.html(''+displayed_pcc);if(displayed_pcc>=100)
{imagesloaded=!0;setTimeout(()=>{openItOnceIfFull()},30)}
if(displayed_pcc<actual_pcc)
bam()},30)}
function pcmusic(pc){var xcc=pc*334;actual_pcc=parseInt(pc*100);bam()}
setTimeout(()=>{$('.loader').css({clip:'rect(185px,'+(334+334)+'px,186px,'+(344-334)+'px)'})
if(!no_line){$('.loading-pc').css({transform:'translateY(-50%) translateX('+(15+$('.loader').width()/2+$('.loader').width()/10)+'px)'})}
setTimeout(()=>{$('html').addClass('open_the_mask_alfred_OPEN_IT');$('.loader').css({clip:'rect(0px,668px,411px,0px)'})
setTimeout(()=>{preanimcompleted=!0;openItOnceIfFull()},300)},1700)},1000)
var $taarget=$('#коробка');if(no_line)
$taarget=$('.myprofile');else if($goto&&$goto.length)
$taarget=$('#коробка, .страница-'+($goto.index()+1));if(is_safari)
$taarget=$('body')
$taarget.imagesLoaded({background:'*'}).always(function(instance){clearTimeout(too);pcmusic(1)}).done(function(instance){}).fail(function(){}).progress(function(instance,image){pcmusic(instance.progressedCount/instance.images.length)})}
function reopenTheLight(){$centipedehz=$('#коробка .проект').eq(big_active_real_i-1);if(!$centipedehz.length)
$centipedehz=$('#коробка .проект.текущий')
if(!$centipedehz.length)
$centipedehz=$('#коробка .kandinsky')
$train.scrollLeft($('#поезд').scrollLeft()+$centipedehz.offset().left-$centipedehz.width()/2);$centipedehz.addClass('loader');Timer.updateDaKrug($centipedehz);$('html').removeClass('open_the_mask_alfred_OPEN_IT');$('html').removeClass('loadingover')
$('.loading-pc').css({display:'none',visibility:'hidden'})
$centipedehz.css({transition:'none',clip:'rect(185px,668px,186px,0px)'})
$('.текущий').removeClass('текущий');$('#коробка .проект:not(.loader)').css({opacity:0});$('#коробка .проект:not(.loader) .фотография').css({display:'none'});$('.страница').css({transform:''})
setTimeout(()=>{setTimeout(()=>{$('html').addClass('open_the_mask_alfred_OPEN_IT');$centipedehz.css({transition:''})
setTimeout(()=>{$centipedehz.css({clip:'rect(0px,668px,411px,0px)'})},10)
setTimeout(()=>{$('html').removeClass('loading')},100)
setTimeout(()=>{$centipedehz.css({clip:''})
Timer.updateLine();setTimeout(()=>{$('#коробка .проект:not(.loader)').animate({opacity:1},1500,function(){$(this).css({opacity:''});$('#коробка .проект:not(.loader) .фотография').css({display:''});$('html').addClass('loadingover')})},10-9)
setTimeout(()=>{setTimeout(()=>{$('html').removeClass('force_ph')},100-99)
setTimeout(()=>{$centipedehz.addClass('текущий')},500-99)
setTimeout(()=>{$('.loader').removeClass('loader');Timer.startCarrousel()},1600-99)},10-9+200)},800-505)},600)},600-200)}
var please_let_me_go=!1;var skip;var first_load=!0;var $goto;function hashChanged(){if(skip){setTimeout(()=>{skip=!1},200);return}
var type=window.location.hash.substr(1);if(type){var $xgoto=$('.проект').filter('.'+type);if(type=='profile')$xgoto=$('.profile.light');if($xgoto.length){if(first_load){please_let_me_go=!0;$('html').addClass('ffhash')
$('.loader').removeClass('loader')
$xgoto.addClass('loader');$goto=$xgoto}else{location.reload()}}}
first_load=!1}
window.onhashchange=hashChanged;hashChanged();openTheLight();$train.scrollLeft($('.loader').offset().left+$('.loader').width()/2-$(window).width()/2);var ss;$('.страница').each(function(){$('<div class="mbb"></div>').appendTo($(this))})
$(document).click('.mbb',function(){$('.benjamin_bottom .проект').click()});$(".страница").each(function(){var tt=$(this).get(0);tt.addEventListener("click",function(e){if(!$(e.target).is('.mbb'))
{window.preventPClick=!0;return!1}},!0)})
$('.видео-container').each(function(){var $d=$('.template-play-pause-btn > *').clone();$(this).append($d)});$('video').each(function(){if(!is_safari)
$(this).prop('preload','none')
else{$(this).data('real-src',$(this).prop('src'))
$(this).prop('src','')
$(this).prop('preload','none')}})
$('.mbb').on('mouseover',function(){$('.benjamin_bottom .проект').addClass('fakehover')}).on('mouseout',function(){$('.benjamin_bottom .проект').removeClass('fakehover')})
var mousewheelevt=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel"
window.lastMWEvent=0;var firstDelta=0;$(document).on(mousewheelevt,function(e){if($('html').hasClass('big')||$('html').hasClass('showmyprofile'))
return!0;if(Date.now()-window.lastMWEvent<1400){return}
window.lastMWEvent=Date.now();var evt=window.event||e
evt=evt.originalEvent?evt.originalEvent:evt;var delta=evt.detail?evt.detail*(-40):evt.wheelDelta
if(firstDelta===0){firstDelta=delta>0;Timer.navigate('left');return!1}
if((delta>0&&firstDelta)||(delta<0&&!firstDelta)){Timer.navigate('left')}
else{Timer.navigate('right')}
return!1});var nowk=!1;document.addEventListener(mousewheelevt,function(e){if(nowk){e.stopPropagation();return!1}
if($(e.target).hasClass('mbb')){if(ss&&ss.scrollTop>ss.getSize().content.height-$(window).height()-10){nowk=!0;setTimeout(()=>{$(this).click();setTimeout(()=>{nowk=!1},2000)},1)}}},!0)
